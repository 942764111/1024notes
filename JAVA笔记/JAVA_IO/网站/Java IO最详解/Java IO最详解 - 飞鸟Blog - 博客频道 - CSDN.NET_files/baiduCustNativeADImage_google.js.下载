var thisPage={doc:document,Sys:{},AdStruc:{},focusId:-1,playTimer:0,timer:[],get:function(a){return this.doc.getElementById(a)},_initContainerSize:function(){this.container=this.get("container");this.containerBorder=parseInt(config.conBW);this.containerBorderColor=config.rss0;this.containerBgColor=config.rss1||"#ffffff";this.containerPaddingTop=0;this.containerPaddingRight=0;this.containerPaddingBottom=0;this.containerPaddingLeft=0;this.containerWidth=parseInt(config.rsi0)-2*this.containerBorder-this.containerPaddingLeft-this.containerPaddingRight;this.containerHeight=parseInt(config.rsi1)-2*this.containerBorder-this.containerPaddingTop-this.containerPaddingBottom;this.bodyHeight=this.containerHeight;if(config.ptt){this.bodyHeight-=30}this.bodyWidth=this.containerWidth;this.brand_margin=0},_initTextStyle:function(){this.listStyle=config.tlt;this.titleFontColor=config.rss2||"#000000";this.titleFontSize=config.titFS||0;this.titleHoverColor=config.pthc||"#ff0000";this.titleFontFamily=decodeURIComponent(config.titFF)||decodeURIComponent("%E5%BE%AE%E8%BD%AF%E9%9B%85%E9%BB%91");this.titleUnderLine=config.titSU||0;this.hoverUnderline=config.pul||0;this.hoverBgColor=config.hover_color?"#3399DB":"#D14836";this.titlePosition=config.ptp||0;this.tft=config.tft;this.icon=config.icon;if(typeof config.ptbg!="undefined"){this.titleBgOpa=parseInt(config.ptbg)/100}else{this.titleBgOpa=0.7}},_initImageStyle:function(){this.hover=config.hover;this.align=config.adp||1;this.logIS=config.logIS;this.picHeight=config.imHeight;this.picWidth=config.imWidth;this.picTitleHeight=16;this.imgItemWidth=this.picWidth+2;this.imgItemHeight=2+(config.ptp?this.picHeight:this.picHeight+this.picTitleHeight);this.imgCol=config.imC;this.imgRow=config.imR;this.radius=config.radius||0;this.image_zoom=config.image_zoom},_initHeaderStyle:function(){this.hasTitle=config.ptt||0;this.header=decodeURIComponent(config.ptc);this.headerBgColor=config.ptBC||"#ffffff";this.headerFontColor=config.ptFC||"#000000";this.headerFontSize=config.ptFS||14;this.txtRowHeight=config.ptrh||27},_initAds:function(){for(var b=0;b<ads.length;++b){if(ads[b].word_src!="pa"){ads[b].curl=ads[b].curl.replace(/&stid=\d*/,"&stid=116")}}while(ads.length&&ads[ads.length-1].word_src=="pa"){var a=ads.pop();var e=new Object();var d=ads[0];for(var b in d){e[b]=d[b]}e.title=a.title;e.image_url=a.pa_url;var c=a.ori||"";e.curl=ads[0].curl.replace(/&k=[^&]*/g,"&k="+a.title).replace(/&di=\d*/g,"&di=8").replace(/&stid=\d*/,"&stid=115")+"&ori="+c;console.log(e.curl);e.word_src="pa";if(config.pat==1||config.pat==3||config.pat==15){news.unshift(e)}else{if(config.pat==6){ads.unshift(e)}}}},_initEnv:function(){var b,a=navigator.userAgent.toLowerCase();(b=a.match(/msie ([\d.]+)/))?this.Sys.ie=b[1]:(b=a.match(/rv:([\d.]+)/))?this.Sys.ie=b[1]:(b=a.match(/firefox\/([\d.]+)/))?this.Sys.firefox=b[1]:(b=a.match(/chrome\/([\d.]+)/))?this.Sys.chrome=b[1]:(b=a.match(/opera.([\d.]+)/))?this.Sys.opera=b[1]:(b=a.match(/version\/([\d.]+).*safari/))?this.Sys.safari=b[1]:0},calcLayout:function(){var a=Math.max(config.imR*this.imgItemHeight,0);this.notUsedHeight=this.bodyHeight-a;this.blockMarginTop=0;this.imgRowMarginTop=0;this.luWordSpace=15},calcImageParam:function(){this.align=2;this.columnWidth=Math.floor(this.bodyWidth/config.txtC);this.imgRowMarginTop=Math.floor(this.notUsedHeight/(config.imR+1));config.cMR=Math.floor((this.bodyWidth-this.imgItemWidth*config.imC)/(config.imC+1))},init:function(){this.T=baidu.template;this._initEnv();this._initAds();this._initContainerSize();this._initHeaderStyle();this._initImageStyle();this._initTextStyle();this.calcLayout();config.pat==6&&this.calcImageParam()},run:function(){this.init();this.paint();this.initEvents()},paint:function(){var b="";this.get("wrapper").innerHTML=this.T("native_ad_frame_template",{ads:ads,style:this});var a=this.AdStruc=this.layout();if(config.pat==6){b+=this.T("native_ad_pic_template",{ads:a.imageAreaAds,style:this})}this.get("pic_container").innerHTML=b},layout:function(){var a=[],b=ads.splice(0,config.imC*config.imR);a=b;var c={imageAreaAds:a,textAreaAds:[]};return c},getElementsByClass:function(e,a){if(e.nodeType==1){if(e.className==a){return e}else{for(var b=0;b<e.childNodes.length;++b){var c=this.getElementsByClass(e.childNodes[b],a);if(c!=null){return c}}}}return null},animate:function(e,a,d,b,c){clearInterval(this.timer[e]);this.timer[e]=setInterval(this.proxy(this,function(){var g=isNaN(parseInt(a.style.top))?d:parseInt(a.style.top);var f=b<0?g-c:c-g;if(f<=Math.abs(b)){clearInterval(this.timer[e]);a.style.top=c+"px";return}else{g+=b;a.style.top=g+"px"}}),15)},setHover:function(c){var b=c.className||"";if(b.indexOf("pic_item")!==-1){if(this.hover==1){c.className="pic_item pic_item_hover";var a=this.getElementsByClass(c,"mask");a.style.display="block";a.style.top=(0-this.picHeight)+"px";this.animate(c.id,a,(0-this.picHeight),9,1)}else{if(this.hover==2){c.className="pic_item pic_item_hover_L"}else{if(this.hover==3){c.className="pic_item pic_item_hover_L2"}else{c.className="pic_item hover"}}}}},setNormal:function(c){var b=c.className||"";if(b.indexOf("pic_item")!==-1){c.className="pic_item";var a=this.getElementsByClass(c,"mask");this.animate(c.id,a,1,-9,(0-this.picHeight))}},initEvents:function(){var b=this.get("pic_container");function a(f){return f||window.event}function e(h,g,f){h.addEventListener?h.addEventListener(g,f,false):h.attachEvent?h.attachEvent("on"+g,f):h["on"+g]=f}function c(g,f){if(a(g).type=="mouseover"){return !d(f,a(g).relatedTarget||a(g).fromElement)&&!((a(g).relatedTarget||a(g).fromElement)===f)}else{return !d(f,a(g).relatedTarget||a(g).toElement)&&!((a(g).relatedTarget||a(g).toElement)===f)}}function d(f,g){if(!(g&&f)){return false}if(f.contains){return f!=g&&f.contains(g)}else{return !!(f.compareDocumentPosition(g)&16)}}e(b,"mouseover",function(g){var f=g.srcElement?g.srcElement:g.target;if(c(g,f)){while(f&&(typeof f.className!=="string"||f.className.indexOf("pic_item")==-1)){if(f===this){f=0;break}f=f.parentNode}if(!f){return}if(f.className=="pic_itemColumnSpace"){return}if(c(g,f)){thisPage.setHover(f)}}});e(b,"mouseout",function(h){var f=h.srcElement?h.srcElement:h.target;var g=a(h).relatedTarget||a(h).toElement;if(g&&typeof g.className=="string"&&g.className.indexOf("mask")!=-1){return}if(c(h,f)){while(f&&(typeof f.className!=="string"||f.className.indexOf("pic_item")==-1)){f=f.parentNode}if(!f){return}if(f.className=="pic_itemColumnSpace"){return}if(c(h,f)){thisPage.setNormal(f)}}})},proxy:function(b,a){return function(){return a.apply(b,arguments)}}};function advLength(e,a){var d=0;var b=0;for(var c=0;c<e.length;++c){if(escape(e.substring(0,1)).indexOf("%u")<0){b+=1}else{d+=1}}return Math.ceil(a*(d+b/2))}function shorten(e,c,d){if(c<=0){return -1}var a=advLength(e,d);if(a<=c){return e}var b=e.length;while(a+d>c&&a>0){e=e.substring(0,e.length-1);a=advLength(e,d);if(a+d<=c){e+="..";return e}}return -1}thisPage.run();